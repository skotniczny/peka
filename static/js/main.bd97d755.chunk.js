(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(21),s=n.n(r),c=(n(27),n(28),n(7)),i=n(8),o=n(10),l=n(9),d=n(4),j=n(2),b="https://pekapi.herokuapp.com",m={1:{backgroundColor:"rgb(208, 0, 111)",color:"#fff"},2:{backgroundColor:"rgb(98, 181, 229)",color:"#231f20"},3:{backgroundColor:"rgb(108, 29, 69)",color:"#fff"},4:{backgroundColor:"rgb(17, 87, 64)",color:"#fff"},5:{backgroundColor:"rgb(108, 194, 74)",color:"#231f20"},6:{backgroundColor:"rgb(0, 150, 57)",color:"#fff"},7:{backgroundColor:"rgb(0, 53, 148)",color:"#fff"},8:{backgroundColor:"rgb(218, 41, 28)",color:"#fff"},9:{backgroundColor:"rgb(255, 103, 31)",color:"#231f20"},10:{backgroundColor:"rgb(241, 180, 52)",color:"#231f20"},11:{backgroundColor:"rgb(60, 219, 192)",color:"#231f20"},12:{backgroundColor:"rgb(203, 163, 216)",color:"#231f20"},13:{backgroundColor:"rgb(173, 132, 31)",color:"#fff"},14:{backgroundColor:"rgb(148, 96, 55)",color:"#fff"},15:{backgroundColor:"rgb(162, 170, 173)",color:"#231f20"},16:{backgroundColor:"rgb(68, 0, 153)",color:"#fff"},17:{backgroundColor:"rgb(0, 79, 113)",color:"#fff"},18:{backgroundColor:"rgb(254, 219, 0)",color:"#231f20"},19:{backgroundColor:"rgb(0, 178, 169)",color:"#fff"},20:{backgroundColor:"rgb(125, 85, 199)",color:"#fff"}},u=Object.keys(m).slice(0,-2),h=["106","144","145","146","147","148","149","150","151","152","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","198","312","320","321","322","323","341","342","348","396","397","398","431","432","435","484","486","488","511","512","527","602","603","610","611","614","616","651","690","701","702","703","704","710","716","727","729","801","802","803","804","811","812","813","821","830","832","833","834","882","891","893","901","902","903","904","905","907","911"],p=(n(29),n(15)),O=function(e,t){for(var n,a=function(e){var t=e.split("T"),n=Object(p.a)(t,2),a=n[0],r=n[1],s=a.split("-"),c=Object(p.a)(s,3),i=c[0],o=c[1],l=c[2],d=r.split("."),j=Object(p.a)(d,2),b=j[0],m=j[1],u=b.split(":"),h=Object(p.a)(u,3);return{yyyy:i,MM:o,dd:l,HH:h[0],mm:h[1],ss:h[2],zzzz:m}}(e),r="",s=/(HH)|(MM)|(dd)|(mm)|(ss)|(yyyy)|(zzzz)|([^HMdmsyz']+)/g;n=s.exec(t);)r+=a[n[0]]||n[0];return r},f=n(0),v=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={date:new Date},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.intervalID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"tick",value:function(){this.setState({date:new Date})}},{key:"render",value:function(){var e=6e4*this.state.date.getTimezoneOffset(),t=new Date(this.state.date-e).toISOString();return Object(f.jsxs)("div",{className:"clock",children:[Object(f.jsx)("div",{className:"clock-time",children:O(t,"HH:mm:ss")}),Object(f.jsx)("div",{className:"clock-date",children:O(t,"dd.MM.yyyy")})]})}}]),n}(a.Component),x=n(14),g=function(e){return e.result.length&&!e.isEmpty?Object(f.jsx)("div",{className:"results-list",children:e.result.map((function(t,n){return Object(f.jsx)("div",{className:"search-row",children:Object(f.jsxs)(d.b,{to:"/".concat(e.path,"/").concat(encodeURIComponent(t.name)),className:"search-row-link",children:[t.name," ",t.symbol?Object(f.jsx)("span",{className:"tag",children:t.symbol}):""]})},"".concat(e.path,"-").concat(n))}))}):Object(f.jsx)("div",{className:"no-results"})},N=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={query:"",error:null,isLoading:!1,isLoaded:!1,results:[]},a.handleInput=a.handleInput.bind(Object(x.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(x.a)(a)),a}return Object(i.a)(n,[{key:"handleInput",value:function(e){var t=e.target.value;this.setState({query:t}),""===t&&this.setState({results:[]})}},{key:"handleSubmit",value:function(e){var t=this,n=b+"/"+this.props.config.method+"/"+this.state.query;this.setState({isLoading:!0}),fetch(n).then((function(e){return e.json()})).then((function(e){t.setState({isLoading:!1,isLoaded:!0,results:e})}),(function(e){t.setState({isLoaded:!0,error:e})})),e.preventDefault()}},{key:"render",value:function(){var e=this.props.config,t=e.path,n=e.label,a=e.placeholder;return Object(f.jsxs)("div",{className:"search-component",children:[Object(f.jsx)("form",{onSubmit:this.handleSubmit,children:Object(f.jsxs)("div",{className:"search-bar",children:[Object(f.jsx)("label",{className:"form-label",children:n}),Object(f.jsxs)("div",{className:"form-container has-loader",children:[Object(f.jsx)("input",{className:"search-form",type:"text",value:this.state.query,onChange:this.handleInput,placeholder:a}),Object(f.jsx)("span",{className:"loader ".concat(this.state.isLoading?"loading":"")})]})]})}),Object(f.jsx)("div",{className:"results-container",children:Object(f.jsx)(g,{path:t,result:this.state.results,isEmpty:0===this.state.query.length},n)})]})}}]),n}(a.Component),k=function(){return Object(f.jsxs)("header",{className:"app-header",children:[Object(f.jsxs)("div",{className:"app-title",children:[Object(f.jsx)("h1",{className:"app-name",children:Object(f.jsx)(d.b,{className:"app-name-link",to:"/",children:"Wirtualny Monitor"})}),Object(f.jsx)(v,{})]}),Object(f.jsxs)("div",{className:"header-description",children:[Object(f.jsx)("p",{children:"Monitor pokazuje rzeczywisty czas przyjazdu tramwaju lub autobusu na konkretny przystanek."}),Object(f.jsx)("p",{children:"Znajd\u017a lini\u0119, kt\xf3ra ci\u0119 interesuje oraz przystanek z kt\xf3rego chcesz jecha\u0107, a system poka\u017ce rzeczywisty czas przyjazdu."})]}),Object(f.jsx)(N,{config:{method:"stopPoints",label:"przystanki",path:"przystanki",placeholder:"Wpisz nazw\u0119 przystanku"}}),Object(f.jsx)(N,{config:{method:"streets",label:"ulice",path:"ulica",placeholder:"Wpisz ulic\u0119 lub miejscowo\u015b\u0107"}})]})},y=function(e){return-1!==u.indexOf(e.line)?Object(f.jsx)("h2",{className:"direction-line direction-line__tram",style:m[e.line],children:Object(f.jsx)(d.b,{to:"/linia/".concat(e.line),className:"direction-line__link",children:Object(f.jsx)("div",{className:"line-signature",children:e.line})})}):Object(f.jsx)("h2",{className:"direction-line",children:Object(f.jsx)(d.b,{to:"/linia/".concat(e.line),className:"direction-line__link",children:e.line})})},z=n.p+"static/media/bus.00e602b0.svg",w=function(){return Object(f.jsxs)("div",{children:[Object(f.jsxs)("h2",{className:"heading",children:["Linie Autobusowe ",Object(f.jsx)("img",{className:"icon",src:z,alt:"Ikonka tramwaju"})]}),Object(f.jsx)("div",{className:"row",children:h.map((function(e){return Object(f.jsx)("div",{className:"col",children:Object(f.jsx)(y,{line:e})},e)}))})]})},C=n.p+"static/media/tram.c8756459.svg",_=function(){return Object(f.jsxs)("div",{children:[Object(f.jsxs)("h2",{className:"heading",children:["Linie Tramwajowe ",Object(f.jsx)("img",{className:"icon",src:C,alt:"Ikonka tramwaju"})]}),Object(f.jsx)("div",{className:"row",children:u.map((function(e){return Object(f.jsx)("div",{className:"col",children:Object(f.jsx)(y,{line:e})},e)}))})]})},L=function(){return Object(f.jsxs)("div",{className:"lines-list",children:[Object(f.jsx)(_,{}),Object(f.jsx)(w,{})]})},S=function(){return Object(f.jsxs)("div",{className:"spinner",children:[Object(f.jsx)("div",{className:"bounce1"}),Object(f.jsx)("div",{className:"bounce2"}),Object(f.jsx)("div",{className:"bounce3"})]})},I=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={error:null,isLoaded:!1,directions:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=b+"/bollardsByLine/"+this.props.number;fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,times:t.times,directions:t.directions})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.isLoaded,a=e.directions;return t?Object(f.jsxs)("div",{className:"error",children:[Object(f.jsx)(y,{line:this.props.number})," Co\u015b posz\u0142o nie tak!"]}):n?Object(f.jsx)("div",{className:"directions",children:a.map((function(e){return Object(f.jsxs)("div",{className:"direction",children:[Object(f.jsxs)("div",{className:"direction-heading",children:[Object(f.jsx)(y,{line:e.direction.lineName}),Object(f.jsxs)("h2",{className:"direction-direction",children:["Kierunek: ",e.direction.direction,Object(f.jsx)("span",{title:"returnVariant:"+e.direction.returnVariant.toString(),children:e.direction.returnVariant?"\u2b06":"\u2b07"})]})]}),e.bollards.map((function(e){return Object(f.jsx)("div",{className:"direction-bollards",children:Object(f.jsxs)(d.b,{to:"/przystanek/".concat(e.tag),className:"direction-bollard__link",children:[Object(f.jsxs)("span",{className:"order-no "+(1===e.orderNo&&"first"),children:[e.orderNo,"."]})," ",Object(f.jsx)("span",{className:"bollard-name",children:e.name})," ",Object(f.jsx)("span",{className:"tag",children:e.tag})]})},e.name)}))]},e.direction.direction)}))}):Object(f.jsx)(S,{})}}]),n}(a.Component),D=function(e){var t=e.item,n=t.realTime,a=t.minutes,r=t.departure,s=!1,c=a;return n&&(0===a&&(c="<1",s=!0),c+=" min"),Object(f.jsx)("div",{className:"item-property item-minutes "+(s?"blink":""),children:n?c:O(r,"HH:mm")})},M=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={error:null,isLoaded:!1,times:[],bollard:{}},a}return Object(i.a)(n,[{key:"loadData",value:function(){var e=this,t=b+"/times/"+this.props.tag;fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,times:t.times,bollard:t.bollard})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"componentDidMount",value:function(){var e=this;this.loadData(),this.intervalID=setInterval((function(){e.loadData()}),15e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.isLoaded,a=e.times,r=e.bollard;return t?Object(f.jsxs)("div",{children:["Error: ",t.message]}):n?Object(f.jsxs)("div",{className:"stop-point",children:[Object(f.jsxs)("div",{className:"stop-point__data",children:[Object(f.jsx)("h2",{className:"item-name",children:r.name}),Object(f.jsx)("h3",{className:"item-tag",title:r.tag,children:r.symbol})]}),Object(f.jsxs)("div",{className:"stop-point__rows",children:[Object(f.jsxs)("div",{className:"stop-point__headings",children:[Object(f.jsx)("div",{className:"item-property item-line",children:"Linia"}),Object(f.jsx)("div",{className:"item-property item-direction",children:"Kierunek"}),Object(f.jsx)("div",{className:"item-property item-minutes",children:"Odjazd"})]}),a.map((function(e,t){return Object(f.jsxs)("div",{className:"stop-point__item",children:[Object(f.jsx)("div",{className:"item-property item-line",children:e.line}),Object(f.jsx)("div",{className:"item-property item-direction",children:e.direction}),Object(f.jsx)("div",{className:"item-property item-info",children:e.lowFloorBus&&Object(f.jsx)("span",{title:"pojazd niskopod\u0142gowy",children:"\u267f"})}),Object(f.jsx)(D,{item:e})]},t)}))]})]}):Object(f.jsx)(S,{})}}]),n}(a.Component),H=function(e){return Object(f.jsxs)("div",{className:"stop-point__data",children:[Object(f.jsx)("h2",{className:"item-name",children:e.bollard.name}),Object(f.jsx)("h3",{className:"item-tag",title:e.bollard.symbol,children:e.bollard.tag})]})},W=function(e){return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"stop-point__headings",children:[Object(f.jsx)("div",{className:"item-property item-line",children:"Linia"}),Object(f.jsx)("div",{className:"item-property item-direction",children:"Kierunek"})]}),e.directions.map((function(e,t){return Object(f.jsxs)("div",{className:"stop-point__item",children:[Object(f.jsx)("div",{className:"item-property item-line",children:e.lineName}),Object(f.jsx)("div",{className:"item-property item-direction",children:e.direction})]},t)}))]})},B=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={error:null,isLoaded:!1,bollards:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=b+"/"+this.props.method+"/"+this.props.name;fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,bollards:t.bollards})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.isLoaded,a=e.bollards;return t?Object(f.jsxs)("div",{children:["Error: ",t.message]}):n?Object(f.jsx)("div",{className:"stop-point",children:Object(f.jsx)("div",{className:"stop-point__rows",children:a.map((function(e,t){return Object(f.jsxs)(d.b,{to:"/przystanek/".concat(e.bollard.tag),className:"stop-point__card",children:[Object(f.jsx)(H,{bollard:e.bollard}),Object(f.jsx)(W,{directions:e.directions})]},t)}))})}):Object(f.jsx)(S,{})}}]),n}(a.Component),q=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(f.jsx)(d.a,{basename:"/peka",children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(k,{}),Object(f.jsx)("main",{className:"app-main",children:Object(f.jsxs)("div",{className:"main-content",children:[Object(f.jsx)(j.a,{exact:!0,path:"/",component:L}),Object(f.jsx)(j.a,{path:"/linia/:number",render:function(e){var t=e.match;return Object(f.jsx)(I,{number:t.params.number})}}),Object(f.jsx)(j.a,{path:"/przystanek/:tag",render:function(e){var t=e.match;return Object(f.jsx)(M,{tag:t.params.tag})}}),Object(f.jsx)(j.a,{path:"/przystanki/:name",render:function(e){var t=e.match;return Object(f.jsx)(B,{method:"bollardsByStopPoint",name:t.params.name},"przystanki-".concat(t.params.name))}}),Object(f.jsx)(j.a,{path:"/ulica/:name",render:function(e){var t=e.match;return Object(f.jsx)(B,{method:"bollardsByStreet",name:t.params.name},"ulice-".concat(t.params.name))}})]})})]})})}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(f.jsx)(q,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.bd97d755.chunk.js.map