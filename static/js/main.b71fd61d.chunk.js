(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{22:function(e,a,t){},23:function(e,a,t){},29:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(15),l=t.n(s),o=(t(21),t(22),t(3)),c=t(1);const i="https://pekapi.herokuapp.com",m={1:{backgroundColor:"rgb(208, 0, 111)",color:"#fff"},2:{backgroundColor:"rgb(98, 181, 229)",color:"#231f20"},3:{backgroundColor:"rgb(108, 29, 69)",color:"#fff"},4:{backgroundColor:"rgb(17, 87, 64)",color:"#fff"},5:{backgroundColor:"rgb(108, 194, 74)",color:"#231f20"},6:{backgroundColor:"rgb(0, 150, 57)",color:"#fff"},7:{backgroundColor:"rgb(0, 53, 148)",color:"#fff"},8:{backgroundColor:"rgb(218, 41, 28)",color:"#fff"},9:{backgroundColor:"rgb(255, 103, 31)",color:"#231f20"},10:{backgroundColor:"rgb(241, 180, 52)",color:"#231f20"},11:{backgroundColor:"rgb(60, 219, 192)",color:"#231f20"},12:{backgroundColor:"rgb(203, 163, 216)",color:"#231f20"},13:{backgroundColor:"rgb(173, 132, 31)",color:"#fff"},14:{backgroundColor:"rgb(148, 96, 55)",color:"#fff"},15:{backgroundColor:"rgb(162, 170, 173)",color:"#231f20"},16:{backgroundColor:"rgb(68, 0, 153)",color:"#fff"},17:{backgroundColor:"rgb(0, 79, 113)",color:"#fff"},18:{backgroundColor:"rgb(254, 219, 0)",color:"#231f20"},19:{backgroundColor:"rgb(0, 178, 169)",color:"#fff"},20:{backgroundColor:"rgb(125, 85, 199)",color:"#fff"}},d=Object.keys(m).slice(0,-2),p=["106","144","145","146","147","148","149","150","151","152","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","198","312","320","321","322","323","341","342","348","396","397","398","431","432","435","484","486","488","511","512","527","602","603","610","611","614","616","651","690","701","702","703","704","710","716","727","729","801","802","803","804","811","812","813","821","830","832","833","834","882","891","893","901","902","903","904","905","907","911"];t(23);var u=t(9);const h=(e,a)=>{const t=(e=>{const a=e.split("T"),t=Object(u.a)(a,2),r=t[0],n=t[1],s=r.split("-"),l=Object(u.a)(s,3),o=l[0],c=l[1],i=l[2],m=n.split("."),d=Object(u.a)(m,2),p=d[0],h=d[1],E=p.split(":"),b=Object(u.a)(E,3);return{yyyy:o,MM:c,dd:i,HH:b[0],mm:b[1],ss:b[2],zzzz:h}})(e);let r,n="",s=/(HH)|(MM)|(dd)|(mm)|(ss)|(yyyy)|(zzzz)|([^HMdmsyz']+)/g;for(;r=s.exec(a);)n+=t[r[0]]||r[0];return n};class E extends r.Component{constructor(e){super(e),this.state={date:new Date}}componentDidMount(){this.intervalID=setInterval((()=>this.tick()),1e3)}componentWillUnmount(){clearInterval(this.intervalID)}tick(){this.setState({date:new Date})}render(){const e=6e4*this.state.date.getTimezoneOffset(),a=new Date(this.state.date-e).toISOString();return n.a.createElement("div",{className:"clock"},n.a.createElement("div",{className:"clock-time"},h(a,"HH:mm:ss")),n.a.createElement("div",{className:"clock-date"},h(a,"dd.MM.yyyy")))}}var b=e=>e.result.length&&!e.isEmpty?n.a.createElement("div",{className:"results-list"},e.result.map(((a,t)=>n.a.createElement("div",{className:"search-row",key:"".concat(e.path,"-").concat(t)},n.a.createElement(o.b,{to:"/".concat(e.path,"/").concat(encodeURIComponent(a.name)),className:"search-row-link"},a.name," ",a.symbol?n.a.createElement("span",{className:"tag"},a.symbol):""))))):n.a.createElement("div",{className:"no-results"});class g extends r.Component{constructor(e){super(e),this.state={query:"",error:null,isLoading:!1,isLoaded:!1,results:[]},this.handleInput=this.handleInput.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleInput(e){const a=e.target.value;this.setState({query:a}),""===a&&this.setState({results:[]})}handleSubmit(e){const a=i+"/"+this.props.config.method+"/"+this.state.query;this.setState({isLoading:!0}),fetch(a).then((e=>e.json())).then((e=>{this.setState({isLoading:!1,isLoaded:!0,results:e})}),(e=>{this.setState({isLoaded:!0,error:e})})),e.preventDefault()}render(){const e=this.props.config,a=e.path,t=e.label,r=e.placeholder;return n.a.createElement("div",{className:"search-component"},n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",{className:"search-bar"},n.a.createElement("label",{className:"form-label"},t),n.a.createElement("div",{className:"form-container has-loader"},n.a.createElement("input",{className:"search-form",type:"text",value:this.state.query,onChange:this.handleInput,placeholder:r}),n.a.createElement("span",{className:"loader ".concat(this.state.isLoading?"loading":"")})))),n.a.createElement("div",{className:"results-container"},n.a.createElement(b,{key:t,path:a,result:this.state.results,isEmpty:0===this.state.query.length})))}}var v=()=>n.a.createElement("header",{className:"app-header"},n.a.createElement("div",{className:"app-title"},n.a.createElement("h1",{className:"app-name"},n.a.createElement(o.b,{className:"app-name-link",to:"/"},"Wirtualny Monitor")),n.a.createElement(E,null)),n.a.createElement("div",{className:"header-description"},n.a.createElement("p",null,"Monitor pokazuje rzeczywisty czas przyjazdu tramwaju lub autobusu na konkretny przystanek."),n.a.createElement("p",null,"Znajd\u017a lini\u0119, kt\xf3ra ci\u0119 interesuje oraz przystanek z kt\xf3rego chcesz jecha\u0107, a system poka\u017ce rzeczywisty czas przyjazdu.")),n.a.createElement(g,{config:{method:"stopPoints",label:"przystanki",path:"przystanki",placeholder:"Wpisz nazw\u0119 przystanku"}}),n.a.createElement(g,{config:{method:"streets",label:"ulice",path:"ulica",placeholder:"Wpisz ulic\u0119 lub miejscowo\u015b\u0107"}}));var N=e=>-1!==d.indexOf(e.line)?n.a.createElement("h2",{className:"direction-line direction-line__tram",style:m[e.line]},n.a.createElement(o.b,{to:"/linia/".concat(e.line),className:"direction-line__link"},n.a.createElement("div",{className:"line-signature"},e.line))):n.a.createElement("h2",{className:"direction-line"},n.a.createElement(o.b,{to:"/linia/".concat(e.line),className:"direction-line__link"},e.line)),k=t.p+"static/media/bus.02a13a95.svg";var y=()=>n.a.createElement("div",null,n.a.createElement("h2",{className:"heading"},"Linie Autobusowe ",n.a.createElement("img",{className:"icon",src:k,alt:"Ikonka tramwaju"})),n.a.createElement("div",{className:"row"},p.map((e=>n.a.createElement("div",{className:"col",key:e},n.a.createElement(N,{line:e})))))),f=t.p+"static/media/tram.e6d4d9c8.svg";var z=()=>n.a.createElement("div",null,n.a.createElement("h2",{className:"heading"},"Linie Tramwajowe ",n.a.createElement("img",{className:"icon",src:f,alt:"Ikonka tramwaju"})),n.a.createElement("div",{className:"row"},d.map((e=>n.a.createElement("div",{className:"col",key:e},n.a.createElement(N,{line:e}))))));var w=()=>n.a.createElement("div",{className:"lines-list"},n.a.createElement(z,null),n.a.createElement(y,null));var C=()=>n.a.createElement("div",{className:"spinner"},n.a.createElement("div",{className:"bounce1"}),n.a.createElement("div",{className:"bounce2"}),n.a.createElement("div",{className:"bounce3"}));class _ extends r.Component{constructor(e){super(e),this.state={error:null,isLoaded:!1,directions:[]}}componentDidMount(){const e=i+"/bollardsByLine/"+this.props.number;fetch(e).then((e=>e.json())).then((e=>{this.setState({isLoaded:!0,times:e.times,directions:e.directions})}),(e=>{this.setState({isLoaded:!0,error:e})}))}render(){const e=this.state,a=e.error,t=e.isLoaded,r=e.directions;return a?n.a.createElement("div",{className:"error"},n.a.createElement(N,{line:this.props.number})," Co\u015b posz\u0142o nie tak!"):t?n.a.createElement("div",{className:"directions"},r.map((e=>n.a.createElement("div",{className:"direction",key:e.direction.direction},n.a.createElement("div",{className:"direction-heading"},n.a.createElement(N,{line:e.direction.lineName}),n.a.createElement("h2",{className:"direction-direction"},"Kierunek: ",e.direction.direction,n.a.createElement("span",{title:"returnVariant:"+e.direction.returnVariant.toString()},e.direction.returnVariant?"\u2b06":"\u2b07"))),e.bollards.map((e=>n.a.createElement("div",{className:"direction-bollards",key:e.name},n.a.createElement(o.b,{to:"/przystanek/".concat(e.tag),className:"direction-bollard__link"},n.a.createElement("span",{className:"order-no "+(1===e.orderNo&&"first")},e.orderNo,".")," ",n.a.createElement("span",{className:"bollard-name"},e.name)," ",n.a.createElement("span",{className:"tag"},e.tag))))))))):n.a.createElement(C,null)}}var L=e=>{const a=e.item,t=a.realTime,r=a.minutes,s=a.departure;let l=!1,o=r;return t&&(0===r&&(o="<1",l=!0),o+=" min"),n.a.createElement("div",{className:"item-property item-minutes "+(l?"blink":"")},t?o:h(s,"HH:mm"))};class j extends r.Component{constructor(e){super(e),this.state={error:null,isLoaded:!1,times:[],bollard:{}}}loadData(){const e=i+"/times/"+this.props.tag;fetch(e).then((e=>e.json())).then((e=>{this.setState({isLoaded:!0,times:e.times,bollard:e.bollard})}),(e=>{this.setState({isLoaded:!0,error:e})}))}componentDidMount(){this.loadData(),this.intervalID=setInterval((()=>{this.loadData()}),15e3)}componentWillUnmount(){clearInterval(this.intervalID)}render(){const e=this.state,a=e.error,t=e.isLoaded,r=e.times,s=e.bollard;return a?n.a.createElement("div",null,"Error: ",a.message):t?n.a.createElement("div",{className:"stop-point"},n.a.createElement("div",{className:"stop-point__data"},n.a.createElement("h2",{className:"item-name"},s.name),n.a.createElement("h3",{className:"item-tag",title:s.tag},s.symbol)),n.a.createElement("div",{className:"stop-point__rows"},n.a.createElement("div",{className:"stop-point__headings"},n.a.createElement("div",{className:"item-property item-line"},"Linia"),n.a.createElement("div",{className:"item-property item-direction"},"Kierunek"),n.a.createElement("div",{className:"item-property item-minutes"},"Odjazd")),r.map(((e,a)=>n.a.createElement("div",{className:"stop-point__item",key:a},n.a.createElement("div",{className:"item-property item-line"},e.line),n.a.createElement("div",{className:"item-property item-direction"},e.direction),n.a.createElement("div",{className:"item-property item-info"},e.lowFloorBus&&n.a.createElement("span",{title:"pojazd niskopod\u0142gowy"},"\u267f")),n.a.createElement(L,{item:e})))))):n.a.createElement(C,null)}}var S=e=>n.a.createElement("div",{className:"stop-point__data"},n.a.createElement("h2",{className:"item-name"},e.bollard.name),n.a.createElement("h3",{className:"item-tag",title:e.bollard.symbol},e.bollard.tag));var I=e=>n.a.createElement("div",null,n.a.createElement("div",{className:"stop-point__headings"},n.a.createElement("div",{className:"item-property item-line"},"Linia"),n.a.createElement("div",{className:"item-property item-direction"},"Kierunek")),e.directions.map(((e,a)=>n.a.createElement("div",{className:"stop-point__item",key:a},n.a.createElement("div",{className:"item-property item-line"},e.lineName),n.a.createElement("div",{className:"item-property item-direction"},e.direction)))));class D extends r.Component{constructor(e){super(e),this.state={error:null,isLoaded:!1,bollards:[]}}componentDidMount(){const e=i+"/"+this.props.method+"/"+this.props.name;fetch(e).then((e=>e.json())).then((e=>{this.setState({isLoaded:!0,bollards:e.bollards})}),(e=>{this.setState({isLoaded:!0,error:e})}))}render(){const e=this.state,a=e.error,t=e.isLoaded,r=e.bollards;return a?n.a.createElement("div",null,"Error: ",a.message):t?n.a.createElement("div",{className:"stop-point"},n.a.createElement("div",{className:"stop-point__rows"},r.map(((e,a)=>n.a.createElement(o.b,{to:"/przystanek/".concat(e.bollard.tag),className:"stop-point__card",key:a},n.a.createElement(S,{bollard:e.bollard}),n.a.createElement(I,{directions:e.directions})))))):n.a.createElement(C,null)}}class M extends r.Component{render(){return n.a.createElement(o.a,{basename:"/peka"},n.a.createElement("div",{className:"App"},n.a.createElement(v,null),n.a.createElement("main",{className:"app-main"},n.a.createElement("div",{className:"main-content"},n.a.createElement(c.a,{exact:!0,path:"/",component:w}),n.a.createElement(c.a,{path:"/linia/:number",render:({match:e})=>n.a.createElement(_,{number:e.params.number})}),n.a.createElement(c.a,{path:"/przystanek/:tag",render:({match:e})=>n.a.createElement(j,{tag:e.params.tag})}),n.a.createElement(c.a,{path:"/przystanki/:name",render:({match:e})=>n.a.createElement(D,{method:"bollardsByStopPoint",name:e.params.name,key:"przystanki-".concat(e.params.name)})}),n.a.createElement(c.a,{path:"/ulica/:name",render:({match:e})=>n.a.createElement(D,{method:"bollardsByStreet",name:e.params.name,key:"ulice-".concat(e.params.name)})})))))}}var x=M;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.b71fd61d.chunk.js.map